# Chainlit RAG çŸ¥è¯†åº“ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Chainlit å’Œ RAG (Retrieval-Augmented Generation) æŠ€æœ¯çš„æ™ºèƒ½çŸ¥è¯†åº“ç³»ç»Ÿï¼Œæ”¯æŒæ–‡æ¡£ä¸Šä¼ ã€å‘é‡åŒ–æœç´¢å’Œæ™ºèƒ½é—®ç­”ã€‚

## é¡¹ç›®ç»“æ„

```
chainlit-rag/
â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ PROJECT.md              # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–åŒ…
â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ Dockerfile             # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Dockerç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ docker-compose.dev.yml # Dockerå¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ docker-manage-dev.sh   # Dockerå¼€å‘ç¯å¢ƒç®¡ç†è„šæœ¬
â”œâ”€â”€ backend/               # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”œâ”€â”€ frontend/             # å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ app.py           # Chainlitåº”ç”¨
â”‚   â””â”€â”€ chainlit.md      # Chainlité…ç½®
â”œâ”€â”€ docker/               # Dockerç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ integrated_server.py  # æ•´åˆæœåŠ¡å™¨
â”‚   â”œâ”€â”€ init_db.py           # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â””â”€â”€ init.sql             # æ•°æ®åº“ç»“æ„
â”œâ”€â”€ configs/              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ deployment/           # éƒ¨ç½²ç›¸å…³
â”œâ”€â”€ cloudformation/       # AWS CloudFormationæ¨¡æ¿
â”œâ”€â”€ lambda_functions/     # AWS Lambdaå‡½æ•°
â”œâ”€â”€ fix-log/             # ä¿®å¤æ—¥å¿—å’Œæ–‡æ¡£
â”œâ”€â”€ data/                # æ•°æ®ç›®å½•ï¼ˆgitå¿½ç•¥ï¼‰
â”œâ”€â”€ uploads/             # ä¸Šä¼ æ–‡ä»¶ç›®å½•ï¼ˆgitå¿½ç•¥ï¼‰
â””â”€â”€ logs/                # æ—¥å¿—ç›®å½•ï¼ˆgitå¿½ç•¥ï¼‰
```

## æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®ç°åŠŸèƒ½
- **æ–‡æ¡£ä¸Šä¼ **ï¼šæ”¯æŒ txtã€pdfã€docxã€mdã€csvã€json æ ¼å¼
- **æ™ºèƒ½å‘é‡åŒ–**ï¼šä½¿ç”¨ OpenAI Embedding API ç”Ÿæˆæ–‡æ¡£å‘é‡
- **RAGæœç´¢**ï¼šåŸºäºä½™å¼¦ç›¸ä¼¼åº¦çš„æ™ºèƒ½æ–‡æ¡£æ£€ç´¢
- **æ™ºèƒ½é—®ç­”**ï¼šåŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹ç”Ÿæˆå‡†ç¡®å›ç­”
- **ç”¨æˆ·è®¤è¯**ï¼šå®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€éªŒè¯ç³»ç»Ÿ
- **Dockeræ”¯æŒ**ï¼šå®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- **çƒ­é‡è½½å¼€å‘**ï¼šå¼€å‘ç¯å¢ƒæ”¯æŒä»£ç ä¿®æ”¹è‡ªåŠ¨é‡è½½

### ğŸš€ æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šChainlit (Python Web UIæ¡†æ¶)
- **åç«¯**ï¼šFlask (Python Webæ¡†æ¶)
- **æ•°æ®åº“**ï¼šPostgreSQL
- **ç¼“å­˜**ï¼šRedis
- **å‘é‡æœç´¢**ï¼šOpenAI Embedding API
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **äº‘éƒ¨ç½²**ï¼šAWS Lambda + CloudFormation

## å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒå¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd chainlit-rag

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="your-openai-api-key"

# 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ
./docker-manage-dev.sh start

# 4. è®¿é—®åº”ç”¨
# Chainlitç•Œé¢: http://localhost:8000
# APIæ¥å£: http://localhost:5001
```

### å¼€å‘ç¯å¢ƒç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./docker-manage-dev.sh status

# æŸ¥çœ‹æ—¥å¿—
./docker-manage-dev.sh logs

# é‡å¯æœåŠ¡
./docker-manage-dev.sh restart

# åœæ­¢æœåŠ¡
./docker-manage-dev.sh stop

# æ¸…ç†ç¯å¢ƒ
./docker-manage-dev.sh clean
```

## ä½¿ç”¨è¯´æ˜

### 1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- è®¿é—® http://localhost:8000
- ç‚¹å‡»"ç™»å½•"æŒ‰é’®
- æ³¨å†Œæ–°ç”¨æˆ·æˆ–ä½¿ç”¨ç°æœ‰è´¦æˆ·ç™»å½•

### 2. ä¸Šä¼ æ–‡æ¡£
- ç™»å½•åç‚¹å‡»"ä¸Šä¼ æ–‡æ¡£"
- é€‰æ‹©æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
- ç­‰å¾…æ–‡æ¡£å¤„ç†å’Œå‘é‡åŒ–å®Œæˆ

### 3. æ™ºèƒ½é—®ç­”
- åœ¨èŠå¤©ç•Œé¢è¾“å…¥é—®é¢˜
- ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€ç´¢ç›¸å…³æ–‡æ¡£
- åŸºäºæ–‡æ¡£å†…å®¹ç”Ÿæˆå‡†ç¡®å›ç­”

## å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„
- `frontend/app.py`ï¼šChainlitå‰ç«¯åº”ç”¨
- `docker/integrated_server.py`ï¼šFlaskåç«¯API
- `backend/services/`ï¼šä¸šåŠ¡é€»è¾‘æœåŠ¡
- `backend/models/`ï¼šæ•°æ®æ¨¡å‹å®šä¹‰

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `backend/services/` ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘
2. åœ¨ `docker/integrated_server.py` ä¸­æ·»åŠ APIè·¯ç”±
3. åœ¨ `frontend/app.py` ä¸­æ·»åŠ å‰ç«¯äº¤äº’
4. æ›´æ–° `requirements.txt` æ·»åŠ æ–°ä¾èµ–

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨ `./docker-manage-dev.sh logs` æŸ¥çœ‹å®æ—¶æ—¥å¿—
- ä»£ç ä¿®æ”¹åä¼šè‡ªåŠ¨é‡è½½
- æ•°æ®åº“æ•°æ®æŒä¹…åŒ–åœ¨ `./data/` ç›®å½•

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®
docker-compose up -d
```

### AWSäº‘éƒ¨ç½²
- å‚è€ƒ `cloudformation/` ç›®å½•ä¸­çš„æ¨¡æ¿
- ä½¿ç”¨ `deployment/deploy.sh` è„šæœ¬éƒ¨ç½²

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥**ï¼šç¡®ä¿è®¾ç½®æ­£ç¡®çš„ OpenAI API å¯†é’¥
2. **æ–‡ä»¶å¤§å°**ï¼šå»ºè®®ä¸Šä¼ æ–‡ä»¶ä¸è¶…è¿‡ 50MB
3. **æ•°æ®å¤‡ä»½**ï¼šé‡è¦æ•°æ®è¯·å®šæœŸå¤‡ä»½ `./data/` ç›®å½•
4. **å®‰å…¨é…ç½®**ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹é»˜è®¤å¯†ç å’ŒJWTå¯†é’¥

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å˜æ›´
4. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**æœ€åæ›´æ–°**ï¼š2025-01-27  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å°±ç»ª 