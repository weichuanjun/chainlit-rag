# Chainlit RAG çŸ¥è¯†åº“ç³»ç»Ÿ - å¼€å‘æ¨¡å¼ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# ä½¿ç”¨å¼€å‘æ¨¡å¼ç®¡ç†è„šæœ¬
./docker-manage-dev.sh start

# æˆ–è€…ç›´æ¥ä½¿ç”¨docker-compose
docker-compose -f docker-compose.dev.yml up -d
```

### 2. éªŒè¯ç¯å¢ƒ

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯æ‰€æœ‰ç»„ä»¶
python test-dev-env.py

# æˆ–è€…æ‰‹åŠ¨æ£€æŸ¥æœåŠ¡çŠ¶æ€
./docker-manage-dev.sh status
```

### 3. è®¿é—®åº”ç”¨

- **Chainlitç•Œé¢**: http://localhost:8000
- **APIæ¥å£**: http://localhost:5001
- **å¥åº·æ£€æŸ¥**: http://localhost:5001/health

## ğŸ”§ å¼€å‘æ¨¡å¼ç‰¹æ€§

### âœ… çƒ­é‡è½½æ”¯æŒ
- æºä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡è½½
- æ— éœ€é‡å¯å®¹å™¨å³å¯çœ‹åˆ°æ›´æ”¹
- æ”¯æŒå‰ç«¯å’Œåç«¯ä»£ç çš„çƒ­æ›´æ–°

### âœ… æ•°æ®æŒä¹…åŒ–
- æ•°æ®åº“æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- Redisç¼“å­˜æ•°æ®æŒä¹…åŒ–
- ä¸Šä¼ æ–‡ä»¶æŒä¹…åŒ–ä¿å­˜

### âœ… å¼€å‘å·¥å…·
- å®æ—¶æ—¥å¿—æŸ¥çœ‹
- å¿«é€Ÿé‡å¯æœåŠ¡
- å®Œæ•´çš„æµ‹è¯•å¥—ä»¶

## ğŸ“ ç›®å½•ç»“æ„

```
chainlit-rag/
â”œâ”€â”€ frontend/           # å‰ç«¯ä»£ç ï¼ˆçƒ­é‡è½½ï¼‰
â”œâ”€â”€ backend/           # åç«¯ä»£ç ï¼ˆçƒ­é‡è½½ï¼‰
â”œâ”€â”€ docker/            # Dockeré…ç½®ï¼ˆçƒ­é‡è½½ï¼‰
â”œâ”€â”€ configs/           # é…ç½®æ–‡ä»¶ï¼ˆçƒ­é‡è½½ï¼‰
â”œâ”€â”€ data/              # æ•°æ®ç›®å½•ï¼ˆæŒä¹…åŒ–ï¼‰
â”œâ”€â”€ uploads/           # ä¸Šä¼ æ–‡ä»¶ï¼ˆæŒä¹…åŒ–ï¼‰
â”œâ”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶ï¼ˆæŒä¹…åŒ–ï¼‰
â””â”€â”€ docker-compose.dev.yml  # å¼€å‘ç¯å¢ƒé…ç½®
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./docker-manage-dev.sh start

# åœæ­¢å¼€å‘ç¯å¢ƒ
./docker-manage-dev.sh stop

# é‡å¯å¼€å‘ç¯å¢ƒ
./docker-manage-dev.sh restart

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./docker-manage-dev.sh status

# æŸ¥çœ‹æ—¥å¿—
./docker-manage-dev.sh logs [service_name]

# é‡æ–°æ„å»ºé•œåƒ
./docker-manage-dev.sh build

# æ¸…ç†ç¯å¢ƒ
./docker-manage-dev.sh clean
```

### å¼€å‘è°ƒè¯•

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./docker-manage-dev.sh logs app

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose -f docker-compose.dev.yml exec app bash

# æŸ¥çœ‹æ•°æ®åº“
docker-compose -f docker-compose.dev.yml exec postgres psql -U postgres -d chainlit_rag

# æŸ¥çœ‹Redis
docker-compose -f docker-compose.dev.yml exec redis redis-cli
```

## ğŸ” ç”¨æˆ·è®¤è¯

### æµ‹è¯•è´¦å·
- **é‚®ç®±**: test@example.com
- **å¯†ç **: testpass123
- **ç”¨æˆ·å**: testuser

### æ³¨å†Œæ–°ç”¨æˆ·
1. è®¿é—® http://localhost:8000
2. ç‚¹å‡»"ğŸ“ æ³¨å†Œ"
3. å¡«å†™ç”¨æˆ·ä¿¡æ¯
4. å®Œæˆæ³¨å†Œ

### ç™»å½•
1. è®¿é—® http://localhost:8000
2. ç‚¹å‡»"ğŸ” ç™»å½•"
3. è¾“å…¥é‚®ç®±å’Œå¯†ç ï¼ˆæ ¼å¼ï¼šé‚®ç®±,å¯†ç ï¼‰
4. å®Œæˆç™»å½•

## ğŸ“„ æ–‡æ¡£ç®¡ç†

### ä¸Šä¼ æ–‡æ¡£
1. **ç›´æ¥ç²˜è´´å†…å®¹**: åœ¨èŠå¤©æ¡†ä¸­ç²˜è´´æ–‡æ¡£å†…å®¹
2. **åˆ›å»ºç¤ºä¾‹æ–‡æ¡£**: è¾“å…¥"åˆ›å»ºç¤ºä¾‹æ–‡æ¡£"å‘½ä»¤
3. **æ–‡ä»¶ä¸Šä¼ **: é€šè¿‡èŠå¤©ç•Œé¢ä¸Šä¼ æ–‡ä»¶

### æ”¯æŒçš„æ–‡æ¡£æ ¼å¼
- æ–‡æœ¬æ–‡ä»¶ (.txt)
- Markdownæ–‡ä»¶ (.md)
- PDFæ–‡ä»¶ (.pdf)
- Wordæ–‡æ¡£ (.docx, .doc)
- CSVæ–‡ä»¶ (.csv)
- JSONæ–‡ä»¶ (.json)

## ğŸ’¬ èŠå¤©å¯¹è¯

### åŸºæœ¬å¯¹è¯
- ç›´æ¥è¾“å…¥é—®é¢˜
- ç³»ç»Ÿä¼šè‡ªåŠ¨ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯
- ç”ŸæˆåŸºäºæ–‡æ¡£çš„å›å¤

### ç‰¹æ®Šå‘½ä»¤
- `åˆ›å»ºç¤ºä¾‹æ–‡æ¡£`: åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡æ¡£
- é•¿æ–‡æœ¬å†…å®¹: è‡ªåŠ¨è¯†åˆ«ä¸ºæ–‡æ¡£ä¸Šä¼ 

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥DockerçŠ¶æ€
docker info

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8000
lsof -i :5001
lsof -i :5432
lsof -i :6379

# æ¸…ç†å¹¶é‡æ–°å¯åŠ¨
./docker-manage-dev.sh clean
./docker-manage-dev.sh start
```

#### 2. ç™»å½•çŠ¶æ€ä¸¢å¤±
- ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„API_BASE_URLé…ç½®
- æ£€æŸ¥JWT_SECRETé…ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

#### 3. æ–‡ä»¶ä¸Šä¼ å¤±è´¥
- æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
- ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡é™åˆ¶
- æŸ¥çœ‹æœåŠ¡æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

#### 4. èŠå¤©å›å¤å¼‚å¸¸
- æ£€æŸ¥OpenAI APIé…ç½®
- ç¡®è®¤å‘é‡æ•°æ®åº“çŠ¶æ€
- æŸ¥çœ‹APIæœåŠ¡æ—¥å¿—

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
./docker-manage-dev.sh logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
./docker-manage-dev.sh logs app
./docker-manage-dev.sh logs postgres
./docker-manage-dev.sh logs redis

# å®æ—¶è·Ÿè¸ªæ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f app
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. å‡å°‘é‡å¯æ—¶é—´
```bash
# åªé‡å¯åº”ç”¨æœåŠ¡
docker-compose -f docker-compose.dev.yml restart app

# åªé‡æ–°æ„å»ºåº”ç”¨é•œåƒ
docker-compose -f docker-compose.dev.yml build app
```

#### 2. æ¸…ç†èµ„æº
```bash
# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker image prune -f

# æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨
docker container prune -f

# æ¸…ç†æœªä½¿ç”¨çš„ç½‘ç»œ
docker network prune -f
```

## ğŸ”„ ä»£ç ä¿®æ”¹æµç¨‹

### 1. ä¿®æ”¹ä»£ç 
- ç›´æ¥ç¼–è¾‘ `frontend/` æˆ– `backend/` ç›®å½•ä¸‹çš„æ–‡ä»¶
- ä»£ç ä¼šè‡ªåŠ¨é‡è½½ï¼Œæ— éœ€é‡å¯å®¹å™¨

### 2. éªŒè¯æ›´æ”¹
- è®¿é—® http://localhost:8000 æŸ¥çœ‹å‰ç«¯æ›´æ”¹
- ä½¿ç”¨æµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½: `python test-dev-env.py`

### 3. è°ƒè¯•é—®é¢˜
- æŸ¥çœ‹å®æ—¶æ—¥å¿—: `./docker-manage-dev.sh logs app`
- è¿›å…¥å®¹å™¨è°ƒè¯•: `docker-compose -f docker-compose.dev.yml exec app bash`

### 4. é‡å¯æœåŠ¡ï¼ˆå¦‚éœ€è¦ï¼‰
```bash
# é‡å¯åº”ç”¨æœåŠ¡
docker-compose -f docker-compose.dev.yml restart app

# æˆ–é‡å¯æ‰€æœ‰æœåŠ¡
./docker-manage-dev.sh restart
```

## ğŸ“Š ç›‘æ§å’Œè°ƒè¯•

### å¥åº·æ£€æŸ¥
```bash
# APIå¥åº·æ£€æŸ¥
curl http://localhost:5001/health

# æ•°æ®åº“è¿æ¥æ£€æŸ¥
docker-compose -f docker-compose.dev.yml exec postgres pg_isready -U postgres

# Redisè¿æ¥æ£€æŸ¥
docker-compose -f docker-compose.dev.yml exec redis redis-cli ping
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
docker system df

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
docker network ls
```

## ğŸš€ éƒ¨ç½²å‡†å¤‡

### ç”Ÿäº§ç¯å¢ƒé…ç½®
1. ä¿®æ”¹ `docker-compose.yml` ä¸­çš„é…ç½®
2. è®¾ç½®æ­£ç¡®çš„ç¯å¢ƒå˜é‡
3. é…ç½®ç”Ÿäº§æ•°æ®åº“å’ŒRedis
4. è®¾ç½®SSLè¯ä¹¦

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
docker-compose -f docker-compose.dev.yml exec postgres pg_dump -U postgres chainlit_rag > backup.sql

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf uploads_backup.tar.gz uploads/

# å¤‡ä»½å‘é‡ç´¢å¼•
tar -czf vector_index_backup.tar.gz data/vector_index/
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. è¿è¡Œæµ‹è¯•è„šæœ¬: `python test-dev-env.py`
3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—: `./docker-manage-dev.sh logs`
4. æ£€æŸ¥æœåŠ¡çŠ¶æ€: `./docker-manage-dev.sh status`

---

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼** ğŸ‰ 